# Keiracom v3.0: The Constitution (Immutable)
> **Role:** The Single Source of Truth for Business Logic & Architecture.
> **Status:** READ ONLY for AI Agents.
> **Last Updated:** December 3, 2025

## 1. Executive Summary
Keiracom is the **'Bloomberg Terminal for SEO.'** We act as an Automated Hedge Fund and a Headless Marketing Operation.

### 1.1 Marketing Action Plan (Cross-Reference)
- **Reference Document:** `MARKETING.md` (Definitive sales strategy).
- **Engine Dependencies:** Engine 3 (Strike Distance) feeds Programmatic Direct Mail; Engine 4 (Authority) feeds Dogfood Inbound Content.

## 2. Business Model & Strategy
| Tier | Price (AUD) | Portfolio Limit | The 'High-Fidelity' Promise |
| :--- | :--- | :--- | :--- |
| **Startup** | $297/mo | 25 Assets | Daily Portfolio Optimization, Freshness Attack |
| **Growth** | $697/mo | 100 Assets | Competitor Spy, Strike Distance Engine |
| **Enterprise** | $1,297/mo | 500 Assets | Weekly Backlink Gap, Cannibalization Engine |

### 2.1 Project Modes (The Bifurcation Logic)
- **ðŸ“ Local Mode:** Targets Map Pack. Logic is constrained by `location_code` and prioritizes Proximity/Reviews.
- **ðŸŒ Global Mode:** Targets Organic Top 10. Logic constrained by `country_code` and prioritizes Content Depth/Authority.

### 2.2 The 'IPO' Package (Launchpad)
- **Product:** Initial Publishing Offering (IPO).
- **Price:** $399 (One-Time).
- **Goal:** Paid Lead Magnet (Filters for intent).
- **The Offer:** "Taking your Asset Public."
    1.  **The Ticker:** Domain Purchase (Automated).
    2.  **The Shell:** High-Speed Next.js Template (Technical SEO Optimized).
    3.  **Seed Assets:** 5 High-Yield Articles (Generated via Engine 1 & 4).
    4.  **The Roadshow:** Automated submission to Google, Bing, and 50+ Directories.
- **The Upsell:** "Subscription required after 30 days to maintain rankings."

## 3. The 6 Proprietary Engines (High-Fidelity Logic)

### 1. Revenue Shield (The Unified Portfolio Manager)
- **Goal:** Active Portfolio Optimization (Yield Maximization).
- **Input Sources:** Source A (GSC), Source B (Rivals), Source C (Arbitrage).
- **Affordability Gate:** `Difficulty > (User DA + 15)`.
- **Formula (YES Score):** $$YES = \frac{\text{Search Volume} \times \text{CPC}}{\text{Difficulty}^{1.5}}$$
- **Action:** Zero-Latency Swap (If New_Opp_YES > Worst_Active_YES): **SWAP IMMEDIATELY.**

### 2. Freshness Attack (The Content Sniper)
- **Goal:** Execute "Skyscraper" attacks.
- **Vulnerability Score:** Age (>18mo) + Thinness (<1,000 words).
- **Action:** Generates Content Brief for 2x deeper content.

### 3. Strike Distance Sniper (The Page 1 Accelerator)
- **Goal:** Push assets ranking #11-20 to Page 1.
- **Logic:** 3-Vector Comparative Diagnostics (Content, Schema, Title).
- **Output:** Provides **Copy/Paste Assets** (JSON-LD or H2 snippets).

### 4. Authority Architect (The Semantic Map)
- **Goal:** Identify and fill "Topical Voids."
- **Logic:** Graph Theory (`MissingNode = Competitor_Cluster - User_Cluster`).
- **Output Logic:** 2-Stage Rocket (Brief -> Draft).
- **Quality Control:** User must **[APPROVE]** Draft before CMS export.

### 5. Cannibalization Resolver (The Highlander Protocol)
- **Goal:** Resolve internal keyword conflicts.
- **Logic:** If `Count(Unique_URLs)` > 1.
- **Judgment (Strength Score):** $$Score = (Rank \times -1) + (Backlinks \times 0.5) + (Traffic \times 0.2)$$
- **Action:** Prescribe **301 Redirect** (Loser â†’ Winner).

### 6. SERP Heist (The Snippet Thief)
- **Goal:** Steal "Position 0" (Featured Snippet).
- **Action:** Gemini rewrites competitor snippet to be **More Concise** and **Better Structured** (HTML List/Table).

## 4. Technical Architecture
- **Orchestration:** Prefect 3.0 (Daily Flows).
- **Intelligence:** Gemini 1.5 Flash (Analysis) & 1.5 Pro (Creative).
- **Database:** PostgreSQL (Async via SQLAlchemy).
- **Frontend:** Next.js + Tailwind + Shadcn/ui.

### 4.1 Automation & Control Strategy (The "Tesla Protocol")
1.  **Co-Pilot Mode (Default):** Assets pushed to CMS as **DRAFT** status (High Safety).
2.  **Pilot Mode (Optional):** Assets **PUBLISHED LIVE** immediately (High Velocity).
- **Steering Wheel:** Global **[TAKE CONTROL]** button downgrades to Co-Pilot and pauses queue.

### 4.2 Custodial Domain Protocol (The Robinhood Model)
- **Strategy:** Keiracom buys and holds the domain (The Ticker) to ensure zero friction and perfect DNS control.
- **Tech:** Vercel Domains API (Instant global propagation).
- **Exit Clause:** If user churns, we unlock the transfer code.

## 5. Frontend Architecture & Design System (The 'Bloomberg' Standard)
- **Stack:** Next.js, Tailwind, Shadcn/ui.
- **Typography:** **Geist Mono**.
- **Aesthetics:** OLED Dark Mode (Neon Green/Red Accents).

### 5.1 Thematic Architecture (Vibe Codes)
- **Concept:** No custom designs. Clients select a "Vibe Code" (Ticker Symbol for Design).
- **Implementation:** Tailwind CSS Variables defined in `tailwind.config.js`.
- **Themes:**
    - `$SAAS` (Stripe-like)
    - `$TRUST` (Legal/Financial)
    - `$CRAFT` (Artisan/Earth)
    - `$BOLD` (High Energy)
    - `$CLINIC` (Medical)
